{"version":3,"sources":["webpack:///./src/pages/docs/client-custom-http-headers.mdx","webpack:///./src/layouts/docs.tsx"],"names":["pageTitle","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent","DocsLayout","candidateMdxNodes","useStaticQuery","allMdx","nodes","index","docsIndex","prefix","pageTitleSuffix"],"mappings":"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","file":"component---src-pages-docs-client-custom-http-headers-mdx-38edcd4039d43e0080cc.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/minu/IdeaProjects/upstream-armeria/site/src/layouts/docs.tsx\";\nexport const pageTitle = \"Sending custom HTTP headers\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  pageTitle,\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <h1 {...{\n      \"id\": \"sending-custom-http-headers\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h1\" {...{\n        \"href\": \"#sending-custom-http-headers\",\n        \"aria-label\": \"sending custom http headers permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Sending custom HTTP headers`}</h1>\n    <h6 {...{\n      \"className\": \"inlinePageToc\",\n      \"role\": \"navigation\"\n    }}>{`Table of contents`}</h6>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#using-clientswithheaders\"\n        }}>{`Using Clients.withHeaders()`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#using-clientoptionheaders\"\n        }}>{`Using ClientOption.HEADERS`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#using-clientbuilderdecorator\"\n        }}>{`Using ClientBuilder.decorator()`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#using-a-derived-client\"\n        }}>{`Using a derived client`}</a></li>\n    </ul>\n    <p>{`When sending an RPC request, it is sometimes required to send HTTP headers with it, such as an authentication token.\nThere are four ways to customize the HTTP headers of your RPC request:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Using the `}<a parentName=\"li\" {...{\n          \"href\": \"type://Clients#withHeaders(Consumer):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Clients.html#withHeaders(java.util.function.Consumer)\"\n        }}>{`type://Clients#withHeaders(Consumer)`}</a>{` method`}</li>\n      <li parentName=\"ul\">{`Using the `}<a parentName=\"li\" {...{\n          \"href\": \"type://ClientOption#HEADERS\"\n        }}>{`type://ClientOption#HEADERS`}</a>{` option`}</li>\n      <li parentName=\"ul\">{`Using the `}<a parentName=\"li\" {...{\n          \"href\": \"type://ClientBuilder#decorator(Function):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientBuilder.html#decorator(java.util.function.Function)\"\n        }}>{`type://ClientBuilder#decorator(Function)`}</a>{` method`}</li>\n      <li parentName=\"ul\">{`Using a derived client`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"using-clientswithheaders\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#using-clientswithheaders\",\n        \"aria-label\": \"using clientswithheaders permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Using `}<inlineCode parentName=\"h2\">{`Clients.withHeaders()`}</inlineCode></h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import static com.linecorp.armeria.common.HttpHeaderNames.AUTHORIZATION;\nimport com.linecorp.armeria.common.util.SafeCloseable;\nimport com.linecorp.armeria.client.Clients;\n\nHelloService.Iface client = Clients.newClient(\"tbinary+http://example.com/hello\",\n                                               HelloService.Iface.class);\ntry (SafeCloseable ignored = Clients.withHeaders(\n        headers -> headers.set(AUTHORIZATION, credential))) {\n    client.hello(\"authorized personnel\");\n}\n`}</code></pre>\n    <p>{`If you are setting only a single header,\nyou can use `}<a parentName=\"p\" {...{\n        \"href\": \"type://Clients#withHeader(CharSequence,String):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Clients.html#withHeader(java.lang.CharSequence,java.lang.String)\"\n      }}>{`type://Clients#withHeader(CharSequence,String)`}</a>{` simply:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`try (SafeCloseable ignored = Clients.withHeader(AUTHORIZATION, credential)) {\n    client.hello(\"authorized personnel\");\n}\n`}</code></pre>\n    <p>{`You can also nest `}<inlineCode parentName=\"p\">{`withHeader(s)`}</inlineCode>{`. The following example will send both `}<inlineCode parentName=\"p\">{`user-agent`}</inlineCode>{` header and\n`}<inlineCode parentName=\"p\">{`authorization`}</inlineCode>{` header when calling `}<inlineCode parentName=\"p\">{`client.hello()`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import static com.linecorp.armeria.common.HttpHeaderNames.USER_AGENT;\n\ntry (SafeCloseable ignored1 = Clients.withHeader(USER_AGENT, myUserAgent)) {\n    for (String cred : credentials) {\n        try (SafeCloseable ignored2 = Clients.withHeaders(AUTHORIZATION, cred)) {\n            client.hello(\"authorized personnel\");\n        }\n    }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"using-clientoptionheaders\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#using-clientoptionheaders\",\n        \"aria-label\": \"using clientoptionheaders permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Using `}<inlineCode parentName=\"h2\">{`ClientOption.HEADERS`}</inlineCode></h2>\n    <p>{`If you have a custom HTTP header whose value does not change often, you can use\n`}<a parentName=\"p\" {...{\n        \"href\": \"type://ClientOption#HEADERS\"\n      }}>{`type://ClientOption#HEADERS`}</a>{` which is more efficient:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`import static com.linecorp.armeria.common.HttpHeaderNames.AUTHORIZATION;\nimport com.linecorp.armeria.common.HttpHeaders;\nimport com.linecorp.armeria.client.ClientBuilder;\nimport com.linecorp.armeria.client.ClientOption;\n\nClientBuilder cb = Clients.builder(\"tbinary+http://example.com/hello\");\ncb.setHeader(AUTHORIZATION, credential);\n// or:\n// cb.option(ClientOption.HEADERS, HttpHeaders.of(AUTHORIZATION, credential));\nHelloService.Iface client = cb.build(HelloService.Iface.class);\nclient.hello(\"authorized personnel\");\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"using-clientbuilderdecorator\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#using-clientbuilderdecorator\",\n        \"aria-label\": \"using clientbuilderdecorator permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Using `}<inlineCode parentName=\"h2\">{`ClientBuilder.decorator()`}</inlineCode></h2>\n    <p>{`If you want more freedom on how you manipulate the request headers, use a decorator:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`ClientBuilder cb = Clients.builder(\"tbinary+http://example.com/hello\");\n\n// Add a decorator that inserts the custom header.\ncb.decorator((delegate, ctx, req) -> { // See DecoratingHttpClientFunction and DecoratingRpcClientFunction.\n    HttpRequest newReq = req.withHeaders(req.headers().toBuilder().set(AUTHORIZATION, credential));\n    ctx.updateRequest(newReq);\n    return delegate.execute(ctx, newReq);\n});\n\nHelloService.Iface client = cb.build(HelloService.Iface.class);\nclient.hello(\"authorized personnel\");\n`}</code></pre>\n    <p>{`Note that this method is as efficient as the `}<a parentName=\"p\" {...{\n        \"href\": \"type://ClientOption#HEADERS\"\n      }}>{`type://ClientOption#HEADERS`}</a>{` option.\nChoose whichever you prefer.`}</p>\n    <h2 {...{\n      \"id\": \"using-a-derived-client\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#using-a-derived-client\",\n        \"aria-label\": \"using a derived client permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Using a derived client`}</h2>\n    <p>{`Although not as simple as using `}<a parentName=\"p\" {...{\n        \"href\": \"type://Clients#withHeader(CharSequence,String):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Clients.html#withHeader(java.lang.CharSequence,java.lang.String)\"\n      }}>{`type://Clients#withHeader(CharSequence,String)`}</a>{`,\nyou can create a derived client to add more custom headers to an existing client:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`HelloService.Iface client = ...;\nHelloService.Iface derivedClient = Clients.newDerivedClient(client, options -> {\n    return ClientOptions.builder()\n                        .options(options)\n                        .decorator(...)  // Add a decorator.\n                        .addHeader(AUTHORIZATION, credential)  // Add an HTTP header.\n                        .build();\n});\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import { RouteComponentProps } from '@reach/router';\nimport { graphql, useStaticQuery } from 'gatsby';\nimport React from 'react';\n\nimport docsIndex from '../pages/docs/toc.json';\nimport MdxLayout from './mdx';\n\ninterface DocsLayoutProps extends RouteComponentProps {\n  pageContext: any;\n  pageTitle: string;\n}\n\nconst DocsLayout: React.FC<DocsLayoutProps> = (props) => {\n  const {\n    allMdx: { nodes: candidateMdxNodes },\n  } = useStaticQuery(graphql`\n    query {\n      allMdx(filter: { fileAbsolutePath: { glob: \"**/src/pages/docs/**\" } }) {\n        nodes {\n          tableOfContents(maxDepth: 1)\n          excerpt(pruneLength: 256, truncate: true)\n          parent {\n            ... on File {\n              sourceInstanceName\n              name\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  return (\n    <MdxLayout\n      {...props}\n      candidateMdxNodes={candidateMdxNodes}\n      index={docsIndex}\n      prefix=\"docs\"\n      pageTitleSuffix=\"Armeria documentation\"\n    />\n  );\n};\n\nexport default DocsLayout;\n"],"sourceRoot":""}