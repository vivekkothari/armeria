(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"/94A":function(e){e.exports=JSON.parse('{"root":["index","setup"],"Useful links":{"Tutorials":"/tutorials","Community articles":"/community/articles","API documentation":"https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/index.html","Release notes":"/release-notes"},"Server":["server-basics","server-decorator","server-grpc","server-thrift","server-docservice","server-annotated-service","server-http-file","server-servlet","server-access-log","server-cors","server-sse","server-service-registration"],"Client":["client-http","client-thrift","client-grpc","client-factory","client-decorator","client-retrofit","client-custom-http-headers","client-timeouts","client-retry","client-circuit-breaker","client-service-discovery"],"Advanced":["advanced-logging","advanced-structured-logging","advanced-custom-attributes","advanced-streaming-backpressure","advanced-structured-logging-kafka","advanced-metrics","advanced-unit-testing","advanced-production-checklist","advanced-zipkin","advanced-saml","advanced-spring-webflux-integration","advanced-dropwizard-integration","advanced-scala","advanced-scalapb","advanced-client-interoperability"]}')},qLoO:function(e,t,a){"use strict";a.r(t),a.d(t,"pageTitle",(function(){return p})),a.d(t,"_frontmatter",(function(){return c})),a.d(t,"default",(function(){return i}));var n=a("zLVn"),r=(a("q1tI"),a("7ljp")),o=a("xCMr"),p="Writing an access log",c={},b={pageTitle:p,_frontmatter:c},s=o.a;function i(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(r.b)(s,Object.assign({},b,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"writing-an-access-log",style:{position:"relative"}},Object(r.b)("a",{parentName:"h1",href:"#writing-an-access-log","aria-label":"writing an access log permalink",className:"anchor before"},Object(r.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Writing an access log"),Object(r.b)("h6",{className:"inlinePageToc",role:"navigation"},"Table of contents"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("a",{parentName:"p",href:"#configuring-logging-framework"},"Configuring logging framework")),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",{parentName:"li",href:"#logback"},"logback")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",{parentName:"li",href:"#log4j2"},"log4j2")))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("a",{parentName:"p",href:"#customizing-a-log-format"},"Customizing a log format")),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",{parentName:"li",href:"#retrieving-values-from-requestlog"},"Retrieving values from RequestLog")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",{parentName:"li",href:"#customizing-timestamp-format"},"Customizing timestamp format")))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("a",{parentName:"p",href:"#customizing-an-access-log-writer"},"Customizing an access log writer"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("a",{parentName:"p",href:"#customizing-an-access-logger"},"Customizing an access logger")))),Object(r.b)("h2",{id:"configuring-logging-framework",style:{position:"relative"}},Object(r.b)("a",{parentName:"h2",href:"#configuring-logging-framework","aria-label":"configuring logging framework permalink",className:"anchor before"},Object(r.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Configuring logging framework"),Object(r.b)("p",null,"To write an access log, you need to configure a logging framework first. The following configurations are\nsimple examples of ",Object(r.b)("inlineCode",{parentName:"p"},"logback.xml")," and ",Object(r.b)("inlineCode",{parentName:"p"},"log4j2.xml")," respectively."),Object(r.b)("h3",{id:"logback",style:{position:"relative"}},Object(r.b)("a",{parentName:"h3",href:"#logback","aria-label":"logback permalink",className:"anchor before"},Object(r.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"logback"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<configuration>\n  <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">\n    <encoder>\n      <pattern>%-4relative [%thread] %-5level %logger{35} - %msg%n</pattern>\n    </encoder>\n  </appender>\n\n  <appender name="ACCESS" class="ch.qos.logback.core.rolling.RollingFileAppender">\n    <file>access.log</file>\n    <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">\n      \x3c!-- daily rollover --\x3e\n      <fileNamePattern>access.%d{yyyy-MM-dd}-%i.log</fileNamePattern>\n      \x3c!-- each file should be at most 1GB, keep 30 days worth of history, but at most 30GB --\x3e\n      <maxFileSize>1GB</maxFileSize>\n      <maxHistory>30</maxHistory>\n      <totalSizeCap>30GB</totalSizeCap>\n    </rollingPolicy>\n    <encoder>\n      <pattern>%msg%n</pattern>\n    </encoder>\n  </appender>\n\n  <logger name="com.linecorp.armeria.logging.access" level="INFO" additivity="false">\n    <appender-ref ref="ACCESS"/>\n  </logger>\n\n  <root level="DEBUG">\n    <appender-ref ref="CONSOLE"/>\n  </root>\n</configuration>\n')),Object(r.b)("h3",{id:"log4j2",style:{position:"relative"}},Object(r.b)("a",{parentName:"h3",href:"#log4j2","aria-label":"log4j2 permalink",className:"anchor before"},Object(r.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"log4j2"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8"?>\n<Configuration status="WARN">\n  <Appenders>\n    <Console name="CONSOLE" target="SYSTEM_OUT">\n      <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>\n    </Console>\n    <RollingFile name="ACCESS" fileName="access.log"\n                 filePattern="access.%d{MM-dd-yyyy}-%i.log.gz">\n      <PatternLayout>\n        <Pattern>%m%n</Pattern>\n      </PatternLayout>\n\n      <Policies>\n        \x3c!-- daily rollover --\x3e\n        <TimeBasedTriggeringPolicy/>\n        \x3c!-- each file should be at most 1GB --\x3e\n        <SizeBasedTriggeringPolicy size="1GB"/>\n      </Policies>\n      \x3c!-- keep 30 archives --\x3e\n      <DefaultRolloverStrategy max="30"/>\n    </RollingFile>\n  </Appenders>\n\n  <Loggers>\n    <Logger name="com.linecorp.armeria.logging.access" level="INFO" additivity="false">\n      <AppenderRef ref="ACCESS"/>\n    </Logger>\n    <Root level="DEBUG">\n      <AppenderRef ref="CONSOLE"/>\n    </Root>\n  </Loggers>\n</Configuration>\n')),Object(r.b)("h2",{id:"customizing-a-log-format",style:{position:"relative"}},Object(r.b)("a",{parentName:"h2",href:"#customizing-a-log-format","aria-label":"customizing a log format permalink",className:"anchor before"},Object(r.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Customizing a log format"),Object(r.b)("p",null,"Access logging is disabled by default. If you want to enable it, you need to specify an ",Object(r.b)("a",{parentName:"p",href:"type://AccessLogWriter:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/logging/AccessLogWriter.html"},"type://AccessLogWriter"),".\nYou may use one of the pre-defined log formats."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},'import com.linecorp.armeria.server.ServerBuilder;\nimport com.linecorp.armeria.server.logging.AccessLogWriter;\n\nServerBuilder sb = Server.builder();\n// Use NCSA common log format.\nsb.accessLogWriter(AccessLogWriter.common(), true);\n// Use NCSA combined log format.\nsb.accessLogWriter(AccessLogWriter.combined(), true);\n// Use your own log format.\nsb.accessLogFormat("...log format...");\n...\n')),Object(r.b)("p",null,"You can have different ",Object(r.b)("a",{parentName:"p",href:"typeplural://AccessLogWriter:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/logging/AccessLogWriter.html"},"typeplural://AccessLogWriter")," for ",Object(r.b)("a",{parentName:"p",href:"typeplural://VirtualHost:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/VirtualHost.html"},"typeplural://VirtualHost")," and ",Object(r.b)("a",{parentName:"p",href:"typeplural://Service:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/Service.html"},"typeplural://Service"),"."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},'ServerBuilder sb = Server.builder();\nAccessLogWriter fallbackLogWriter = ...\nsb.accessLogWriter(fallbackLogWriter);\n\nsb.virtualHost("foo.com")\n  .accessLogWriter(AccessLogWriter.combined(), true)\n  .service((ctx, req) -> HttpResponse.of(OK)); // This service will log using the combined format.\n  ...\n\nsb.route()\n  .get("/commonAccessLog")\n  .accessLogWriter(AccessLogWriter.common(), true)\n  .build((ctx, req) -> HttpResponse.of(OK)); // This service will log using the common format.\n\n// This service will log using the fallbackLogWriter.\nsb.service("/fallbackLogWriter", (ctx, req) -> HttpResponse.of(OK));\n')),Object(r.b)("p",null,"Pre-defined log formats are as follows."),Object(r.b)("p",null,"Tokens for the log format are listed in the following table."),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("div",{style:{width:"12rem"}},"Tokens")),Object(r.b)("th",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"th"},"Condition support")),Object(r.b)("th",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"th"},"Description")))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%A"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"No")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the local IP address"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%a"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"No")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the IP address of the client who initiated a\nrequest. Use ",Object(r.b)("inlineCode",{parentName:"p"},"%{c}a")," format string to get the\nremote IP address where the channel is connected\nto, which may yield a different value when there\nis an intermediary proxy server.\nThis value relies on the ",Object(r.b)("inlineCode",{parentName:"p"},"clientAddress()")," and\n",Object(r.b)("inlineCode",{parentName:"p"},"remoteAddress()")," methods of\n",Object(r.b)("a",{parentName:"p",href:"type://ServiceRequestContext:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html"},"type://ServiceRequestContext"),", please refer to\n",Object(r.b)("a",{parentName:"p",href:"/docs/server-basics#getting-an-ip-address-of-a-client-who-initiated-a-request"},"Getting an IP address of a client who initiated a request"),"\nabout how to configure the\n",Object(r.b)("a",{parentName:"p",href:"type://ServerBuilder:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html"},"type://ServerBuilder")," to get the client address\nyou interest."))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%h"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"No")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the remote hostname or IP address if DNS\nhostname lookup is not available"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%I"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"No")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the request ID. Use ",Object(r.b)("inlineCode",{parentName:"p"},"%{short}I")," format string to\nget the short form."))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%l"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"No")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the remote logname of the user\n(not supported yet, always write ",Object(r.b)("inlineCode",{parentName:"p"},"-"),")"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%u"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"No")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the name of the authenticated remote user\n(not supported yet, always write ",Object(r.b)("inlineCode",{parentName:"p"},"-"),")"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%t"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"No")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the date, time and time zone that the request\nwas received, by default in ",Object(r.b)("inlineCode",{parentName:"p"},"strftime")," format\n%d/%b/%Y:%H:%M:%S %z.\n(for example, ",Object(r.b)("inlineCode",{parentName:"p"},"10/Oct/2000:13:55:36 -0700"),")\nRefer to\n","[Customizing timestamp format][#customizing-timestamp-format]","\nfor more information."))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%r"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Yes")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the request line from the client\n(for example, ",Object(r.b)("inlineCode",{parentName:"p"},"GET /path h2"),")"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%s"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"No")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the HTTP status code returned to the client"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%b"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Yes")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the size of the object returned to the client,\nmeasured in bytes"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%{HEADER_NAME}i"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Yes")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the value of the specified HTTP request header\nname"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%{HEADER_NAME}o"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Yes")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the value of the specified HTTP response header\nname"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%{ATTRIBUTE_NAME}j"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Yes")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the value of the specified attribute name"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%{REQUEST_LOG_NAME}L"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Yes")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the value of the specified variable of the\n",Object(r.b)("a",{parentName:"p",href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"},"type://RequestLog"),". Refer to\n",Object(r.b)("a",{parentName:"p",href:"#retrieving-values-from-requestlog"},"Retrieving values from RequestLog"),"\nfor more information."))))),Object(r.b)("p",null,"Some tokens can have a condition of the response status code and the log message can be omitted with\nthe condition."),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("div",{style:{width:"25rem"}},"Example of a condition")),Object(r.b)("th",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"th"},"Description")))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%200b"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Write the size of the object returned to the\nclient only if the response code is ",Object(r.b)("inlineCode",{parentName:"p"},"200"),"."))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%200,304{User-Agent}i"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Write ",Object(r.b)("inlineCode",{parentName:"p"},"User-Agent")," header value only if the\nresponse code is ",Object(r.b)("inlineCode",{parentName:"p"},"200")," or ",Object(r.b)("inlineCode",{parentName:"p"},"304"),"."))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"%!200,304{com.example.armeria.Attribute#KEY}j"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Write the value of the specified attribute\nonly if the response code is neither ",Object(r.b)("inlineCode",{parentName:"p"},"200"),"\nnor ",Object(r.b)("inlineCode",{parentName:"p"},"304"),"."))))),Object(r.b)("h3",{id:"retrieving-values-from-requestlog",style:{position:"relative"}},Object(r.b)("a",{parentName:"h3",href:"#retrieving-values-from-requestlog","aria-label":"retrieving values from requestlog permalink",className:"anchor before"},Object(r.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Retrieving values from ",Object(r.b)("inlineCode",{parentName:"h3"},"RequestLog")),Object(r.b)("p",null,Object(r.b)("a",{parentName:"p",href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"},"type://RequestLog")," holds information about the request, so a user may want to write these values to his or\nher access log file. To write them in a simple way, ",Object(r.b)("inlineCode",{parentName:"p"},"%{variable}L")," token is provided with the following\nsupported variable:"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("div",{style:{width:"13rem"}},"Name")),Object(r.b)("th",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"th"},"Description")))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"method"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the HTTP method value of the request"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"path"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the absolute path part of the HTTP request URI"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"query"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the query part of the HTTP request URI"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"requestStartTimeMillis"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the time when the processing of the request started,\nin milliseconds since the epoch"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"requestDurationMillis"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the duration that was taken to consume or produce the request\ncompletely, in milliseconds"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"requestDurationNanos"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the duration that was taken to consume or produce the request\ncompletely, in nanoseconds"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"requestLength"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the length of the request content"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"requestCause"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the cause of request processing failure. The class name of the\ncause and the detail message of it will be contained if exists."))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"requestContentPreview"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the preview of the request content"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"responseStartTimeMillis"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the time when the processing of the response started,\nin milliseconds since the epoch"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"responseDurationMillis"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the duration that was taken to consume or produce the response\ncompletely, in milliseconds"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"responseDurationNanos"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the duration that was taken to consume or produce the response\ncompletely, in nanoseconds"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"responseLength"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the length of the response content"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"responseCause"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the cause of response processing failure. The class name of the\ncause and the detail message of it will be contained if exists."))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"responseContentPreview"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the preview of the response content"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"totalDurationMillis"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the amount of time taken since the request processing started and\nuntil the response processing ended, in milliseconds"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"totalDurationNanos"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the amount of time taken since the request processing started and\nuntil the response processing ended, in nanoseconds"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"sessionProtocol"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the session protocol of the request.\ne.g. ",Object(r.b)("inlineCode",{parentName:"p"},"h1"),", ",Object(r.b)("inlineCode",{parentName:"p"},"h2"),", ",Object(r.b)("inlineCode",{parentName:"p"},"h1c")," or ",Object(r.b)("inlineCode",{parentName:"p"},"h2c")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"serializationFormat"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the serialization format of the request.\ne.g. ",Object(r.b)("inlineCode",{parentName:"p"},"tbinary"),", ",Object(r.b)("inlineCode",{parentName:"p"},"ttext"),", ",Object(r.b)("inlineCode",{parentName:"p"},"tcompact"),", ",Object(r.b)("inlineCode",{parentName:"p"},"tjson")," or ",Object(r.b)("inlineCode",{parentName:"p"},"none")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"scheme"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the scheme value printed as ",Object(r.b)("inlineCode",{parentName:"p"},"serializationFormat+sessionProtocol")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"host"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the host name of the request"))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"status"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the status code and its reason phrase of the response.\ne.g. ",Object(r.b)("inlineCode",{parentName:"p"},"200 OK")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"statusCode"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"the status code of the response. e.g. ",Object(r.b)("inlineCode",{parentName:"p"},"200")))))),Object(r.b)("h3",{id:"customizing-timestamp-format",style:{position:"relative"}},Object(r.b)("a",{parentName:"h3",href:"#customizing-timestamp-format","aria-label":"customizing timestamp format permalink",className:"anchor before"},Object(r.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Customizing timestamp format"),Object(r.b)("p",null,"You can specify a new date/time format for the ",Object(r.b)("inlineCode",{parentName:"p"},"%t")," token with\n",Object(r.b)("a",{parentName:"p",href:"https://docs.oracle.com/javase/10/docs/api/java/time/format/DateTimeFormatter.html"},"DateTimeFormatter"),".\nYou can use one of the following formatters which is provided by JDK as a variable of the ",Object(r.b)("inlineCode",{parentName:"p"},"%t")," token,\ne.g. ",Object(r.b)("inlineCode",{parentName:"p"},"%{BASIC_ISO_DATE}t"),". If you want to use your own pattern, you can specify it as the variable,\ne.g. ",Object(r.b)("inlineCode",{parentName:"p"},"%{yyyy MM dd}t"),"."),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"th"},"Formatter")),Object(r.b)("th",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"th"},"Description")),Object(r.b)("th",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"th"},"Example")))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"BASIC_ISO_DATE"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Basic ISO date")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"20111203")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"ISO_LOCAL_DATE"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"ISO Local Date")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"2011-12-03")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"ISO_OFFSET_DATE"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"ISO Date with offset")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"2011-12-03+01:00")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"ISO_DATE"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"ISO Date with or without offset")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"2011-12-03+01:00"),"; ",Object(r.b)("inlineCode",{parentName:"p"},"2011-12-03")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"ISO_LOCAL_TIME"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Time without offset")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"10:15:30")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"ISO_OFFSET_TIME"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Time with offset")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"10:15:30+01:00")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"ISO_TIME"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Time with or without offset")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"10:15:30+01:00"),"; ",Object(r.b)("inlineCode",{parentName:"p"},"10:15:30")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"ISO_LOCAL_DATE_TIME"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"ISO Local Date and Time")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"2011-12-03T10:15:30")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"ISO_OFFSET_DATE_TIME"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Date Time with Offset")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"2011-12-03T10:15:30+01:00")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"ISO_ZONED_DATE_TIME"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Zoned Date Time")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"2011-12-03T10:15:30+01:00[Europe/Paris]")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"ISO_DATE_TIME"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Date and time with ZoneId")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"2011-12-03T10:15:30+01:00[Europe/Paris]")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"ISO_ORDINAL_DATE"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Year and day of year")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"2012-337")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"ISO_WEEK_DATE"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Year and Week")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"2012-W48-6")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"ISO_INSTANT"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"Date and Time of an Instant")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"2011-12-03T10:15:30Z")))),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"RFC_1123_DATE_TIME"))),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},"RFC 1123 / RFC 822")),Object(r.b)("td",{parentName:"tr",colspan:1,rowspan:1},Object(r.b)("p",{parentName:"td"},Object(r.b)("inlineCode",{parentName:"p"},"Tue, 3 Jun 2008 11:05:30 GMT")))))),Object(r.b)("h2",{id:"customizing-an-access-log-writer",style:{position:"relative"}},Object(r.b)("a",{parentName:"h2",href:"#customizing-an-access-log-writer","aria-label":"customizing an access log writer permalink",className:"anchor before"},Object(r.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Customizing an access log writer"),Object(r.b)("p",null,"You can specify your own log writer which implements a ",Object(r.b)("inlineCode",{parentName:"p"},"Consumer")," of ",Object(r.b)("a",{parentName:"p",href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"},"type://RequestLog"),"."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},"ServerBuilder sb = Server.builder();\nsb.accessLogWriter(requestLog -> {\n    // Write your access log with the given RequestLog instance.\n    ...\n}, true);\n")),Object(r.b)("h2",{id:"customizing-an-access-logger",style:{position:"relative"}},Object(r.b)("a",{parentName:"h2",href:"#customizing-an-access-logger","aria-label":"customizing an access logger permalink",className:"anchor before"},Object(r.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(r.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"Customizing an access logger"),Object(r.b)("p",null,"Armeria uses an SLF4J logger whose name is based on a reversed domain name of each virtual host by\ndefault, e.g."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"com.linecorp.armeria.logging.access.com.example")," for ",Object(r.b)("inlineCode",{parentName:"li"},"*.example.com")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"com.linecorp.armeria.logging.access.com.linecorp")," for ",Object(r.b)("inlineCode",{parentName:"li"},"*.linecorp.com"))),Object(r.b)("p",null,"Alternatively, you can specify your own mapper or logger for a ",Object(r.b)("a",{parentName:"p",href:"type://VirtualHost:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/VirtualHost.html"},"type://VirtualHost"),", e.g."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},'ServerBuilder sb = Server.builder();\n\n// Using the specific logger name.\nsb.accessLogger("com.example.my.access.logs");\n...\n\n// Using your own logger.\nLogger logger = LoggerFactory.getLogger("com.example2.my.access.logs");\nsb.accessLogger(Logger);\n...\n\n// Using the mapper which sets an access logger with the given VirtualHost instance.\nsb.accessLogger(virtualHost -> {\n    // Return the logger.\n    // Do not return null. Otherwise, it will raise an IllegalStateException.\n    return LoggerFactory.getLogger("com.example.my.access.logs." + virtualHost.defaultHostname());\n});\n...\n')),Object(r.b)("p",null,"You can also specify your own logger for the specific ",Object(r.b)("a",{parentName:"p",href:"type://VirtualHost:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/VirtualHost.html"},"type://VirtualHost"),". In this case, the mapper or logger\nyou set for a specific ",Object(r.b)("a",{parentName:"p",href:"type://VirtualHost:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/VirtualHost.html"},"type://VirtualHost")," will override the access logger set via\n",Object(r.b)("a",{parentName:"p",href:"type://ServerBuilder#accessLogger(Logger):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html#accessLogger(org.slf4j.Logger)"},"type://ServerBuilder#accessLogger(Logger)"),"."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-java"},'// Using the specific logger name.\nsb.virtualHost("*.example.com")\n  .accessLogger("com.example.my.access.logs")\n  .and()\n...\n\n// Using your own logger.\nLogger logger = LoggerFactory.getLogger("com.example2.my.access.logs");\nsb.virtualHost("*.example2.com")\n  .accessLogger(Logger)\n  .and()\n...\n\n// Using the mapper which sets an access logger with the given VirtualHost instance.\nsb.virtualHost("*.example3.com")\n  .accessLogger(virtualHost -> {\n    // Return the logger.\n    // Do not return null. Otherwise, it will raise an IllegalStateException.\n    return LoggerFactory.getLogger("com.example.my.access.logs." + virtualHost.defaultHostname());\n  })\n...\n')))}i.isMDXComponent=!0},xCMr:function(e,t,a){"use strict";var n=a("Wbzz"),r=a("q1tI"),o=a.n(r),p=a("/94A"),c=a("+ejy");t.a=function(e){var t=Object(n.useStaticQuery)("1217743243").allMdx.nodes;return o.a.createElement(c.a,Object.assign({},e,{candidateMdxNodes:t,index:p,prefix:"docs",pageTitleSuffix:"Armeria documentation"}))}}}]);
//# sourceMappingURL=component---src-pages-docs-server-access-log-mdx-120f63df84dd9eaf07ba.js.map