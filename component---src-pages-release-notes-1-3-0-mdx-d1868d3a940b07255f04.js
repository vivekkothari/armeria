(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{"1lec":function(e){e.exports=JSON.parse('{"/release-notes/1.13.1":"v1.13.1","/release-notes/1.13.0":"v1.13.0","/release-notes/1.12.0":"v1.12.0","/release-notes/1.11.0":"v1.11.0","/release-notes/1.10.0":"v1.10.0","/release-notes/1.9.2":"v1.9.2","/release-notes/1.9.1":"v1.9.1","/release-notes/1.9.0":"v1.9.0","/release-notes/1.8.0":"v1.8.0","/release-notes/1.7.2":"v1.7.2","/release-notes/1.7.1":"v1.7.1","/release-notes/1.7.0":"v1.7.0","/release-notes/1.6.0":"v1.6.0","/release-notes/1.5.0":"v1.5.0","/release-notes/1.4.0":"v1.4.0","/release-notes/1.3.0":"v1.3.0"}')},"2+3N":function(e){e.exports=JSON.parse('{"/news/20210202-newsletter-2":"Armeria Newsletter vol. 2","/news/20200703-newsletter-1":"Armeria Newsletter vol. 1","/news/20200514-newsletter-0":"Armeria Newsletter vol. 0"}')},JkCF:function(e,a,t){"use strict";t("tU7J");var r=t("wFql"),i=t("q1tI"),n=t.n(i),o=t("2+3N"),c=t("1lec"),p=t("+ejy"),l=t("+9zj"),s=r.a.Title;a.a=function(e){var a={},t={},r={root:{"Latest news items":"/news","Latest release notes":"/release-notes","Past news items":"/news/list","Past release notes":"/release-notes/list"},"Recent news items":a,"Recent releases":t};Object.entries(o).forEach((function(e){var t=e[0],r=e[1];a[r]=t})),Object.entries(c).forEach((function(e){var a=e[0],r=e[1];t[r]=a}));var i=Object(l.a)(e.location),m=e.version||i.substring(i.lastIndexOf("/")+1);return m.match(/^[0-9]/)||(m=void 0),n.a.createElement(p.a,Object.assign({},e,{candidateMdxNodes:[],index:r,prefix:"release-notes",pageTitle:m?m+" release notes":e.pageTitle,pageTitleSuffix:"Armeria release notes"}),m?n.a.createElement(s,{id:"release-notes",level:1},n.a.createElement("a",{href:"#release-notes","aria-label":"release notes permalink",className:"anchor before"},n.a.createElement("svg",{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},n.a.createElement("path",{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),m," release notes"):"",e.children)}},"a/8B":function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return c})),t.d(a,"default",(function(){return m}));var r,i=t("zLVn"),n=(t("q1tI"),t("7ljp")),o=t("JkCF"),c={},p=(r="ThankYou",function(e){return console.warn("Component "+r+" was not imported, exported, or provided by MDXProvider as global scope"),Object(n.b)("div",e)}),l={_frontmatter:c},s=o.a;function m(e){var a=e.components,t=Object(i.a)(e,["components"]);return Object(n.b)(s,Object.assign({},l,t,{components:a,mdxType:"MDXLayout"}),Object(n.b)("p",{className:"date"},"30th November 2020"),Object(n.b)("h2",{id:"-new-features",style:{position:"relative"}},Object(n.b)("a",{parentName:"h2",href:"#-new-features","aria-label":" new features permalink",className:"anchor before"},Object(n.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(n.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"🌟 New features"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now use ",Object(n.b)("a",{parentName:"p",href:"https://unixism.net/loti/what_is_io_uring.html"},"io_uring")," for efficient I/O\nprocessing in Linux. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3182"},"#3182")),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Specify the ",Object(n.b)("inlineCode",{parentName:"li"},"-Dcom.linecorp.armeria.transportType=io_uring")," JVM option to enable it."),Object(n.b)("li",{parentName:"ul"},"Netty's ",Object(n.b)("inlineCode",{parentName:"li"},"io_uring")," transport is currently experimental, so you should be careful using the feature."))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"The metrics of requests to a ",Object(n.b)("a",{parentName:"p",href:"type://TransientService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/TransientService.html"},"type://TransientService")," are not collected anymore by default. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3061"},"#3061")," ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3081"},"#3081")),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Access logs and service logs are not recorded as well."),Object(n.b)("li",{parentName:"ul"},"You should use ",Object(n.b)("a",{parentName:"li",href:"type://TransientServiceOption:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/TransientServiceOption.html"},"type://TransientServiceOption")," to enable them.",Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-java"},"HealthCheckService.builder()\n                  .transientServiceOptions(TransientServiceOption.WITH_METRIC_COLLECTION,\n                                           TransientServiceOption.WITH_SERVICE_LOGGING,\n                                           TransientServiceOption.WITH_ACCESS_LOGGING)\n                  .build();\n"))),Object(n.b)("li",{parentName:"ul"},"Currently, ",Object(n.b)("a",{parentName:"li",href:"type://HealthCheckService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/healthcheck/HealthCheckService.html"},"type://HealthCheckService")," and ",Object(n.b)("a",{parentName:"li",href:"type://PrometheusExpositionService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/metric/PrometheusExpositionService.html"},"type://PrometheusExpositionService")," are\n",Object(n.b)("a",{parentName:"li",href:"typeplural://TransientService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/TransientService.html"},"typeplural://TransientService"),"."))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now use Protobuf's ",Object(n.b)("inlineCode",{parentName:"p"},"Message")," and ",Object(n.b)("a",{parentName:"p",href:"https://github.com/scalapb/ScalaPB"},"ScalaPB's"),"\n",Object(n.b)("inlineCode",{parentName:"p"},"GeneratedMessage")," as a request/response object in an annotated service. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3088"},"#3088")," ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3124"},"#3124")," ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3192"},"#3192")),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Use ",Object(n.b)("inlineCode",{parentName:"li"},"armeria-protobuf"),", ",Object(n.b)("inlineCode",{parentName:"li"},"armeria-scalapb_2.12")," or ",Object(n.b)("inlineCode",{parentName:"li"},"armeria-scalapb_2.13")," dependencies."),Object(n.b)("li",{parentName:"ul"},"See ",Object(n.b)("a",{parentName:"li",href:"/docs/advanced-scalapb#supporting-scalapb-in-annotated-services"},"Supporting ScalaPB in annotated services"),"\nfor more information."))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now use Scala ",Object(n.b)("inlineCode",{parentName:"p"},"Future")," in an annotated service. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3189"},"#3189")),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-scala"},'@Get("/items/{id}")\ndef items(@Param id: Int)(implicit ec: ExecutionContext): Future[String] = {\n  Future {\n    // Perform asynchronous task using Armeria\'s event loop.\n    ...\n  }\n}\n'))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now use ",Object(n.b)("a",{parentName:"p",href:"type://HttpDeframer"},"type://HttpDeframer")," to conveniently decode a stream of ",Object(n.b)("a",{parentName:"p",href:"typeplural://HttpObject:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpObject.html"},"typeplural://HttpObject"),"\nto N objects. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2981"},"#2981")),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-java"},"HttpDeframerHandler<String> decoder = ...\nHttpDeframer<String> deframer = HttpDeframer.of(decoder, ByteBufAllocator.DEFAULT);\nHttpRequest request = ...;\nrequest.subscribe(deframer);\n")),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"See ",Object(n.b)("a",{parentName:"li",href:"type://HttpDeframer"},"type://HttpDeframer")," for more information."))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now apply ",Object(n.b)("a",{parentName:"p",href:"type://CircuitBreaker:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreaker.html"},"type://CircuitBreaker")," per request path. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3134"},"#3134"),", ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3135"},"#3135")),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-java"},"CircuitBreakerFactory factory = ...\n// CircuitBreaker is applied per the combination of host and path.\nCircuitBreakerMapping mapping = CircuitBreakerMapping.builder()\n                                                     .perPath()\n                                                     .perHost()\n                                                     .build(factory);\nCircuitBreakerRule rule = ...\nCircuitBreakerClient.newDecorator(mapping, rule);\n"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now apply the different ",Object(n.b)("inlineCode",{parentName:"p"},"maxTotalAttempts")," and ",Object(n.b)("inlineCode",{parentName:"p"},"responseTimeout")," for ",Object(n.b)("a",{parentName:"p",href:"type://RetryingClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryingClient.html"},"type://RetryingClient"),"\nusing ",Object(n.b)("a",{parentName:"p",href:"type://RetryConfig:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryConfig.html"},"type://RetryConfig"),". ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3145"},"#3145")),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-java"},'BiFunction<ClientRequestContext, Request, String> keyFactory =\n    (ctx, req) -> ctx.endpoint().host();\nBiFunction<ClientRequestContext, Request, RetryConfig<HttpResponse>> configFactory = (ctx, req) -> {\n    String host = ctx.endpoint().host();\n    RetryConfigBuilder builder = RetryConfig.<HttpResponse>builder(RetryRule.onException());\n    if (host.equals("host1")) {\n        builder.maxTotalAttempts(2);\n    } else if (host.equals("host2")) {\n        builder.maxTotalAttempts(4);\n    } else {\n        builder.maxTotalAttempts(1);\n    }\n    return builder.build();\n};\nRetryConfigMapping mapping = RetryConfigMapping.of(keyFactory, configFactory);\nRetryingClient.newDecoratorWithMapping(mapping);\n'))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now split the ",Object(n.b)("a",{parentName:"p",href:"type://ResponseHeaders:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/ResponseHeaders.html"},"type://ResponseHeaders")," and bodies using ",Object(n.b)("a",{parentName:"p",href:"type://HttpResponse#split():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpResponse.html#split()"},"type://HttpResponse#split()"),". ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3038"},"#3038")),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-java"},"HttpResponse response = ...\nSplitHttpResponse splitHttpResponse = response.split();\nCompletableFuture<ResponseHeaders> headersFuture = splitHttpResponse.headers();\nStreamMessage<HttpData> bodyStream = splitHttpResponse.body();\n\nheadersFuture.thenApply(headers -> {\n    if (headers.contentType() == MediaType.JSON_SEQ) {\n        // Subscribe to a stream of HttpData.\n        Flux.from(bodyStream)\n            .map(httpData -> {\n                // Convert HttpData to your domain object\n            });\n            ...\n    }\n});\n"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now customize for mapping an exception to a gRPC status. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3197"},"#3197")),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-java"},"GrpcService.builder()\n           .addExceptionMapping(AccessDeniedException.class, Status.UNAUTHENTICATED);\n// Or, use GrpcStatusFunction.\nGrpcService.builder()\n           .exceptionMapping(cause -> {\n               if (cause instanceof AccessDeniedException) {\n                   return Status.UNAUTHENTICATED;\n               }\n               if (cause instanceof FileNotFoundException) {\n                   return Status.NOT_FOUND;\n               }\n               return null; // Return null to use Armeria's default exception mapping.\n           });\n"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now specify the Caffeine spec for the DNS resolver cache. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2970"},"#2970")," ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3007"},"#3007"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now specify a prefix for MDC keys using the ",Object(n.b)("inlineCode",{parentName:"p"},"<prefix>")," element. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3086"},"#3086")," ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3112"},"#3112")),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-xml"},'<configuration>\n  ...\n  <appender name="RCEA" class="com.linecorp.armeria.common.logback.RequestContextExportingAppender">\n    ...\n    \x3c!-- set the prefix of exports which is not wrapped with the <exportGroup> element --\x3e\n    <prefix>armeria.</prefix>\n    <export>remote.id</export>\n    <export>req.headers.user-agent</export>\n    ...\n    <exportGroup>\n      \x3c!-- set the prefix of exports in this <exportGroup> --\x3e\n      <prefix>some_prefix.</prefix>\n      <export>some_value=attr:com.example.AttrKeys#SOME_KEY</export>\n      ...\n    </exportGroup>\n    <exportGroup>\n      \x3c!-- if <prefix> is not defined, no prefix is added to exports --\x3e\n      <export>tracking_id=attr:com.example.AttrKeys#TRACKING_ID_KEY</export>\n      ...\n    </exportGroup>\n  </appender>\n  ...\n</configuration>\n'))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now use the unsafe TLS cipher using ",Object(n.b)("a",{parentName:"p",href:"type://ClientFactoryBuilder#tlsAllowUnsafeCiphers(boolean):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/ClientFactoryBuilder.html#tlsAllowUnsafeCiphers(boolean)"},"type://ClientFactoryBuilder#tlsAllowUnsafeCiphers(boolean)"),".\n",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3157"},"#3157")," ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3172"},"#3172"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now specify an arbitrary type for ",Object(n.b)("a",{parentName:"p",href:"type://@Header:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/Header.html"},"type://@Header")," and ",Object(n.b)("a",{parentName:"p",href:"type://@Param:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/annotation/Param.html"},"type://@Param")," if the\ntype has one of following static methods or the constructor. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2574"},"#2574")," ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3143"},"#3143")," ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3164"},"#3164")),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"public static T of(String) { ... }")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"public static T valueOf(String) { ... }")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"public static T fromString(String) { ... }")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"public T(String) { ... } // constructor"))),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-java"},'public class UserService {\n\n    @Get("/api")\n    public HttpResponse get(@Param User user) {\n        ...\n    }\n\n    private static class User {\n        User(String userId) { ... } // This constructor is used to create User.\n        ...\n    }\n}\n'))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now build and execute an ",Object(n.b)("a",{parentName:"p",href:"type://HttpRequest:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/HttpRequest.html"},"type://HttpRequest")," fluently. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3110"},"#3110")),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-java"},'// Creates a POST HttpRequest whose URI is "/foo?q=bar"\n// with headers "cookie: name=value" and "authorization: value" and a JSON body.\nHttpRequest.builder()\n           .post("/{resource}")\n           .pathParam("resource", "foo")\n           .queryParam("q", "bar")\n           .cookie(Cookie.of("name", "value"))\n           .header("authorization", "value")\n           .content(MediaType.JSON, "{\\"foo\\":\\"bar\\"}"));\n// You can also use WebClient.prepare().\nWebClient client = ...\nclient.prepare()\n      .post("/{resource}")\n      .pathParam("resource", "foo")\n      .queryParam("q", "bar")\n      .cookie(Cookie.of("name", "value"))\n      .header("authorization", "value")\n      .content(MediaType.JSON, "{\\"foo\\":\\"bar\\"}")\n      .execute();\n'))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now easily handle cookies by applying ",Object(n.b)("a",{parentName:"p",href:"type://CookieClient#newDecorator():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/cookie/CookieClient.html#newDecorator()"},"type://CookieClient#newDecorator()"),". ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2637"},"#2637")," ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3118"},"#3118")),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-java"},"WebClient client = WebClient.builder()\n                            .factory(factory)\n                            .decorator(CookieClient.newDecorator())\n                            .build();\nclient.get(...); // The cookies that are received from the origin server\n                 // are added to the request headers.\n"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now use the custom Thrift protocol by using ",Object(n.b)("a",{parentName:"p",href:"type://ThriftProtocolFactoryProvider:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/thrift/ThriftProtocolFactoryProvider.html"},"type://ThriftProtocolFactoryProvider")," and SPI. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3183"},"#3183")),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-java"},'public class TTupleFactoryProvider extends ThriftProtocolFactoryProvider {\n    @Override\n    public Set<ThriftProtocolFactoryProvider.Entry> entries() {\n        return ImmutableSet.of(new ThriftProtocolFactoryProvider.Entry(\n                SerializationFormat.of("ttuple"), new TTupleProtocol.Factory()));\n    }\n}\n'))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now collect more detailed DNS metrics. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/1887"},"#1887")," ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/2935"},"#2935")),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"armeria.client.dns.queries#count{...,result=success}")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"armeria.client.dns.queries#count{...,result=failure}")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"armeria.client.dns.queries.written#count{...}")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"armeria.client.dns.queries.cancelled#count{...}")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"armeria.client.dns.queries.redirected#count{...}")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"armeria.client.dns.queries.cnamed#count{...}")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"armeria.client.dns.queries.noanswer#count{...}")))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now customize the ",Object(n.b)("a",{parentName:"p",href:"type://HealthCheckService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/healthcheck/HealthCheckService.html"},"type://HealthCheckService")," when using Spring integration. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3144"},"#3144")),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-java"},"@Bean\npublic HealthCheckServiceConfigurator healthCheckServiceConfigurator() {\n    return builder -> builder.updatable(true);\n}\n"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can now use ",Object(n.b)("a",{parentName:"p",href:"type://RequestHeaders#acceptLanguage()"},"type://RequestHeaders#acceptLanguage()")," to choose language. ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3177"},"#3177")," ",Object(n.b)("a",{parentName:"p",href:"https://github.com/line/armeria/issues/3179"},"#3179")))),Object(n.b)("h2",{id:"-improvements",style:{position:"relative"}},Object(n.b)("a",{parentName:"h2",href:"#-improvements","aria-label":" improvements permalink",className:"anchor before"},Object(n.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(n.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"📈 Improvements"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Various improvements for ",Object(n.b)("a",{parentName:"li",href:"type://DocService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/docs/DocService.html"},"type://DocService"),". ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3149"},"#3149")," ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3150"},"#3150")," ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3167"},"#3167")," ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3188"},"#3188"))),Object(n.b)("h2",{id:"️-bug-fixes",style:{position:"relative"}},Object(n.b)("a",{parentName:"h2",href:"#%EF%B8%8F-bug-fixes","aria-label":"️ bug fixes permalink",className:"anchor before"},Object(n.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(n.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"🛠️ Bug fixes"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",{parentName:"li",href:"type://HealthCheckedEndpointGroup#endpoints()"},"type://HealthCheckedEndpointGroup#endpoints()")," now returns healthy endpoints properly even when\n",Object(n.b)("a",{parentName:"li",href:"type://EndpointGroup#orElse(EndpointGroup):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/endpoint/EndpointGroup.html#orElse(com.linecorp.armeria.client.endpoint.EndpointGroup)"},"type://EndpointGroup#orElse(EndpointGroup)")," is used. ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3181"},"#3181")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"ServletRequest.getProtocol()")," now returns the proper value when using ",Object(n.b)("a",{parentName:"li",href:"type://TomcatService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/tomcat/TomcatService.html"},"type://TomcatService")," and\n",Object(n.b)("a",{parentName:"li",href:"type://JettyService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/jetty/JettyService.html"},"type://JettyService"),". ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3194"},"#3194")),Object(n.b)("li",{parentName:"ul"},"The route decorators are now evaluated in the reverse order they applied. ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3160"},"#3160")," ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3166"},"#3166"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"The purpose of this change is to make sure we provide a consistent experience when decorating a service.\nFor example, when we decorate a service like the following:",Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-java"},"myService\n  .decorate(decoratorA)\n  .decorate(decoratorB);\n")),"we expect ",Object(n.b)("inlineCode",{parentName:"li"},"decoratorA")," decorates ",Object(n.b)("inlineCode",{parentName:"li"},"myService")," and ",Object(n.b)("inlineCode",{parentName:"li"},"decoratorB")," decorates ",Object(n.b)("inlineCode",{parentName:"li"},"decoratorA"),".\nRoute decorators were breaking this expectation."))),Object(n.b)("li",{parentName:"ul"},"You now get the FORBIDDEN status if your service does not handle preflight requests regardless of\nroute decorators. ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3152"},"#3152")),Object(n.b)("li",{parentName:"ul"},"A gRPC ",Object(n.b)("inlineCode",{parentName:"li"},"ServerCall")," is now closed exactly only once. ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3153"},"#3153")),Object(n.b)("li",{parentName:"ul"},"You no longer see ",Object(n.b)("inlineCode",{parentName:"li"},"AnnotatedConnectException")," when the ",Object(n.b)("a",{parentName:"li",href:"type://Endpoint:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/Endpoint.html"},"type://Endpoint")," is created with an\nIPv6 scope ID. ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3158"},"#3158")," ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3178"},"#3178")),Object(n.b)("li",{parentName:"ul"},"Armeria server does not reject the request path whose first segment includes a colon anymore. ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3154"},"#3154"))),Object(n.b)("h2",{id:"️-deprecations",style:{position:"relative"}},Object(n.b)("a",{parentName:"h2",href:"#%EF%B8%8F-deprecations","aria-label":"️ deprecations permalink",className:"anchor before"},Object(n.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(n.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"🏚️ Deprecations"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",{parentName:"li",href:"type://CircuitBreakerClient#newPerHostAndMethodDecorator(BiFunction,CircuitBreakerRule):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerClient.html#newPerHostAndMethodDecorator(java.util.function.BiFunction,com.linecorp.armeria.client.circuitbreaker.CircuitBreakerRule)"},"type://CircuitBreakerClient#newPerHostAndMethodDecorator(BiFunction,CircuitBreakerRule)")," is now deprecated.\n",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3135"},"#3135"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Use ",Object(n.b)("a",{parentName:"li",href:"type://CircuitBreakerClient#newDecorator(CircuitBreakerMapping,CircuitBreakerRule):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerClient.html#newDecorator(com.linecorp.armeria.client.circuitbreaker.CircuitBreakerMapping,com.linecorp.armeria.client.circuitbreaker.CircuitBreakerRule)"},"type://CircuitBreakerClient#newDecorator(CircuitBreakerMapping,CircuitBreakerRule)")," with the customized\n",Object(n.b)("a",{parentName:"li",href:"type://CircuitBreakerMapping:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerMapping.html"},"type://CircuitBreakerMapping")," using ",Object(n.b)("a",{parentName:"li",href:"type://CircuitBreakerMapping#builder():https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/circuitbreaker/CircuitBreakerMapping.html#builder()"},"type://CircuitBreakerMapping#builder()"),"."))),Object(n.b)("li",{parentName:"ul"},"The response timeout and max total attempts setters in ",Object(n.b)("a",{parentName:"li",href:"type://RetryingClientBuilder:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryingClientBuilder.html"},"type://RetryingClientBuilder")," are now deprecated.\n",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3128"},"#3128")," ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3145"},"#3145"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"The static factory methods that take those parameters in ",Object(n.b)("a",{parentName:"li",href:"type://RetryingClient:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryingClient.html"},"type://RetryingClient")," are now deprecated as well."),Object(n.b)("li",{parentName:"ul"},"Use ",Object(n.b)("a",{parentName:"li",href:"type://RetryConfigMapping:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryConfigMapping.html"},"type://RetryConfigMapping")," and ",Object(n.b)("a",{parentName:"li",href:"type://RetryConfig:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/client/retry/RetryConfig.html"},"type://RetryConfig"),"."))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",{parentName:"li",href:"type://Route#apply(RoutingContext):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/Route.html#apply(com.linecorp.armeria.server.RoutingContext)?full"},"type://Route#apply(RoutingContext)?full")," is deprecated. ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3152"},"#3152"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Use ",Object(n.b)("a",{parentName:"li",href:"type://Route#apply(RoutingContext,boolean):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/Route.html#apply(com.linecorp.armeria.server.RoutingContext,boolean)?full"},"type://Route#apply(RoutingContext,boolean)?full"),"."))),Object(n.b)("li",{parentName:"ul"},"The constructor of ",Object(n.b)("a",{parentName:"li",href:"type://PrometheusExpositionService:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/metric/PrometheusExpositionService.html"},"type://PrometheusExpositionService")," is now deprecated. ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3081"},"#3081"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Use ",Object(n.b)("a",{parentName:"li",href:"type://PrometheusExpositionService#of(CollectorRegistry):https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/metric/PrometheusExpositionService.html#of(io.prometheus.client.CollectorRegistry)"},"type://PrometheusExpositionService#of(CollectorRegistry)"),".")))),Object(n.b)("h2",{id:"️-breaking-changes",style:{position:"relative"}},Object(n.b)("a",{parentName:"h2",href:"#%EF%B8%8F-breaking-changes","aria-label":"️ breaking changes permalink",className:"anchor before"},Object(n.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(n.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"☢️ Breaking changes"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Route decorators are now evaluated in the reverse order they applied. ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3160"},"#3160")," ",Object(n.b)("a",{parentName:"li",href:"https://github.com/line/armeria/issues/3166"},"#3166"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"The purpose of this change is to make sure we provide a consistent experience when decorating a service.\nFor example, when we decorate a service like the following:",Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",{parentName:"pre",className:"language-java"},"myService\n  .decorate(decoratorA)\n  .decorate(decoratorB);\n")),"we expect ",Object(n.b)("inlineCode",{parentName:"li"},"decoratorA")," decorates ",Object(n.b)("inlineCode",{parentName:"li"},"myService")," and ",Object(n.b)("inlineCode",{parentName:"li"},"decoratorB")," decorates ",Object(n.b)("inlineCode",{parentName:"li"},"decoratorA"),".\nRoute decorators were breaking this expectation.")))),Object(n.b)("h2",{id:"-dependencies",style:{position:"relative"}},Object(n.b)("a",{parentName:"h2",href:"#-dependencies","aria-label":" dependencies permalink",className:"anchor before"},Object(n.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(n.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"⛓ Dependencies"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Dropwizard 2.0.13 → 2.0.16"),Object(n.b)("li",{parentName:"ul"},"Fastutil 8.4.2 → 8.4.3"),Object(n.b)("li",{parentName:"ul"},"gRPC 1.33.0 → 1.33.1"),Object(n.b)("li",{parentName:"ul"},"grpc-kotlin-stub 0.2.0 → 0.2.1"),Object(n.b)("li",{parentName:"ul"},"Dropwizard Metrics 4.1.13 → 4.1.15"),Object(n.b)("li",{parentName:"ul"},"Jackson 2.11.2 → 2.12.0"),Object(n.b)("li",{parentName:"ul"},"JCTools 3.1.0 → 3.2.0"),Object(n.b)("li",{parentName:"ul"},"javax.annotation-api 1.3.2",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"jakarta-annotation-api 2.0 has been released with a breaking change so we use javax.annotation-api instead."))),Object(n.b)("li",{parentName:"ul"},"Micrometer 1.5.5 → 1.6.1"),Object(n.b)("li",{parentName:"ul"},"Netty 4.1.53.Final → 4.1.54.Final"),Object(n.b)("li",{parentName:"ul"},"BouncyCastle 1.66 → 1.67"),Object(n.b)("li",{parentName:"ul"},"Reactor 3.3.10.RELEASE → 3.4.0"),Object(n.b)("li",{parentName:"ul"},"Spring Boot 2.3.4.RELEASE → 2.4.0"),Object(n.b)("li",{parentName:"ul"},"Spring 5.2.9.RELEASE → 5.3.1"),Object(n.b)("li",{parentName:"ul"},"Tomcat 9.0.39 → 9.0.40")),Object(n.b)("h2",{id:"-thank-you",style:{position:"relative"}},Object(n.b)("a",{parentName:"h2",href:"#-thank-you","aria-label":" thank you permalink",className:"anchor before"},Object(n.b)("svg",{parentName:"a","aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"},Object(n.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"}))),"🙇 Thank you"),Object(n.b)(p,{usernames:["anuraaga","codefromthecrypt","ghkim3221","haithamgabr","heowc","ikhoon","jrhee17","KarboniteKream","kojilin","masonshin","minwoox","okue","perlun","rolandblain","techno","tobias-","trustin","tumile","Ubehebe","wickedev","windmeup"],mdxType:"ThankYou"}))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-release-notes-1-3-0-mdx-d1868d3a940b07255f04.js.map